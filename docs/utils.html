---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "00_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>sh setup.sh
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Collecting nbdev
  Using cached nbdev-1.1.22-py3-none-any.whl (46 kB)
Requirement already satisfied: jupyter in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (1.0.0)
Collecting nbconvert&lt;6
  Downloading nbconvert-5.6.1-py2.py3-none-any.whl (455 kB)
     |████████████████████████████████| 455 kB 24.4 MB/s eta 0:00:01
Collecting fastrelease
  Using cached fastrelease-0.1.12-py3-none-any.whl (14 kB)
Requirement already satisfied: pip in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (21.2.4)
Collecting fastcore&gt;=1.3.21
  Using cached fastcore-1.3.26-py3-none-any.whl (56 kB)
Requirement already satisfied: packaging in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (20.9)
Requirement already satisfied: pyyaml in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (5.4.1)
Requirement already satisfied: jupyter-client&lt;7.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (6.1.11)
Requirement already satisfied: nbformat&gt;=4.4.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (5.1.2)
Collecting ghapi
  Using cached ghapi-0.1.19-py3-none-any.whl (51 kB)
Requirement already satisfied: ipykernel in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbdev) (5.5.0)
Requirement already satisfied: traitlets in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-client&lt;7.0-&gt;nbdev) (4.3.3)
Requirement already satisfied: jupyter-core&gt;=4.6.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-client&lt;7.0-&gt;nbdev) (4.7.1)
Requirement already satisfied: tornado&gt;=4.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-client&lt;7.0-&gt;nbdev) (6.1)
Requirement already satisfied: python-dateutil&gt;=2.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-client&lt;7.0-&gt;nbdev) (2.8.1)
Requirement already satisfied: pyzmq&gt;=13 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-client&lt;7.0-&gt;nbdev) (22.0.3)
Requirement already satisfied: entrypoints&gt;=0.2.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (0.3)
Requirement already satisfied: bleach in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (3.3.0)
Requirement already satisfied: testpath in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (0.4.4)
Requirement already satisfied: pygments in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (2.8.0)
Requirement already satisfied: defusedxml in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (0.6.0)
Requirement already satisfied: pandocfilters&gt;=1.4.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (1.4.2)
Requirement already satisfied: mistune&lt;2,&gt;=0.8.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (0.8.4)
Requirement already satisfied: jinja2&gt;=2.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbconvert&lt;6-&gt;nbdev) (2.11.3)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jinja2&gt;=2.4-&gt;nbconvert&lt;6-&gt;nbdev) (1.1.1)
Requirement already satisfied: ipython-genutils in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbformat&gt;=4.4.0-&gt;nbdev) (0.2.0)
Requirement already satisfied: jsonschema!=2.5.0,&gt;=2.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from nbformat&gt;=4.4.0-&gt;nbdev) (3.2.0)
Requirement already satisfied: attrs&gt;=17.4.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (20.3.0)
Requirement already satisfied: pyrsistent&gt;=0.14.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (0.17.3)
Requirement already satisfied: importlib-metadata in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (3.7.0)
Requirement already satisfied: setuptools in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (49.6.0.post20210108)
Requirement already satisfied: six&gt;=1.11.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (1.15.0)
Requirement already satisfied: decorator in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from traitlets-&gt;jupyter-client&lt;7.0-&gt;nbdev) (4.4.2)
Requirement already satisfied: webencodings in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from bleach-&gt;nbconvert&lt;6-&gt;nbdev) (0.5.1)
Requirement already satisfied: typing-extensions&gt;=3.6.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from importlib-metadata-&gt;jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (3.10.0.2)
Requirement already satisfied: zipp&gt;=0.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from importlib-metadata-&gt;jsonschema!=2.5.0,&gt;=2.4-&gt;nbformat&gt;=4.4.0-&gt;nbdev) (3.4.0)
Requirement already satisfied: ipython&gt;=5.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipykernel-&gt;nbdev) (7.16.1)
Requirement already satisfied: pexpect in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (4.8.0)
Requirement already satisfied: backcall in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (0.2.0)
Requirement already satisfied: pickleshare in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (0.7.5)
Requirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,&lt;3.1.0,&gt;=2.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (3.0.5)
Requirement already satisfied: jedi&gt;=0.10 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (0.17.2)
Requirement already satisfied: parso&lt;0.8.0,&gt;=0.7.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jedi&gt;=0.10-&gt;ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (0.7.0)
Requirement already satisfied: wcwidth in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from prompt-toolkit!=3.0.0,!=3.0.1,&lt;3.1.0,&gt;=2.0.0-&gt;ipython&gt;=5.0.0-&gt;ipykernel-&gt;nbdev) (0.2.5)
Requirement already satisfied: jupyter-console in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-&gt;nbdev) (6.4.0)
Requirement already satisfied: ipywidgets in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-&gt;nbdev) (7.6.3)
Requirement already satisfied: qtconsole in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-&gt;nbdev) (5.0.2)
Requirement already satisfied: notebook in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jupyter-&gt;nbdev) (6.4.4)
Requirement already satisfied: widgetsnbextension~=3.5.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipywidgets-&gt;jupyter-&gt;nbdev) (3.5.1)
Requirement already satisfied: jupyterlab-widgets&gt;=1.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from ipywidgets-&gt;jupyter-&gt;nbdev) (1.0.0)
Requirement already satisfied: argon2-cffi in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from notebook-&gt;jupyter-&gt;nbdev) (20.1.0)
Requirement already satisfied: Send2Trash&gt;=1.5.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from notebook-&gt;jupyter-&gt;nbdev) (1.5.0)
Requirement already satisfied: terminado&gt;=0.8.3 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from notebook-&gt;jupyter-&gt;nbdev) (0.9.2)
Requirement already satisfied: prometheus-client in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from notebook-&gt;jupyter-&gt;nbdev) (0.9.0)
Requirement already satisfied: ptyprocess in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from terminado&gt;=0.8.3-&gt;notebook-&gt;jupyter-&gt;nbdev) (0.7.0)
Requirement already satisfied: cffi&gt;=1.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from argon2-cffi-&gt;notebook-&gt;jupyter-&gt;nbdev) (1.14.5)
Requirement already satisfied: pycparser in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from cffi&gt;=1.0.0-&gt;argon2-cffi-&gt;notebook-&gt;jupyter-&gt;nbdev) (2.20)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from packaging-&gt;nbdev) (2.4.7)
Requirement already satisfied: qtpy in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from qtconsole-&gt;jupyter-&gt;nbdev) (1.9.0)
Installing collected packages: nbconvert, fastcore, ghapi, fastrelease, nbdev
  Attempting uninstall: nbconvert
    Found existing installation: nbconvert 6.0.7
    Uninstalling nbconvert-6.0.7:
      Successfully uninstalled nbconvert-6.0.7
Successfully installed fastcore-1.3.26 fastrelease-0.1.12 ghapi-0.1.19 nbconvert-5.6.1 nbdev-1.1.22
Collecting fastai
  Using cached fastai-2.5.2-py3-none-any.whl (186 kB)
Collecting spacy
  Using cached spacy-3.1.3-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (5.9 MB)
Collecting pydash
  Using cached pydash-5.1.0-py3-none-any.whl (84 kB)
Requirement already satisfied: pandas in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from -r requirements.txt (line 4)) (1.1.5)
Collecting biopython
  Using cached biopython-1.79-cp36-cp36m-manylinux_2_5_x86_64.manylinux1_x86_64.whl (2.3 MB)
Collecting spacytextblob
  Using cached spacytextblob-3.0.1-py3-none-any.whl (4.1 kB)
Requirement already satisfied: requests in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (2.26.0)
Collecting fastdownload&lt;2,&gt;=0.0.5
  Using cached fastdownload-0.0.5-py3-none-any.whl (13 kB)
Requirement already satisfied: pyyaml in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (5.4.1)
Collecting fastprogress&gt;=0.2.4
  Using cached fastprogress-1.0.0-py3-none-any.whl (12 kB)
Requirement already satisfied: pip in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (21.2.4)
Requirement already satisfied: pillow&gt;6.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (8.3.2)
Requirement already satisfied: scikit-learn in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (0.24.1)
Requirement already satisfied: scipy in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (1.5.3)
Collecting torchvision&gt;=0.8.2
  Using cached torchvision-0.10.1-cp36-cp36m-manylinux1_x86_64.whl (22.1 MB)
Requirement already satisfied: fastcore&lt;1.4,&gt;=1.3.8 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (1.3.26)
Requirement already satisfied: packaging in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (20.9)
Collecting torch&lt;1.10,&gt;=1.7.0
  Using cached torch-1.9.1-cp36-cp36m-manylinux1_x86_64.whl (831.4 MB)
Requirement already satisfied: matplotlib in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from fastai-&gt;-r requirements.txt (line 1)) (3.3.4)
Collecting murmurhash&lt;1.1.0,&gt;=0.28.0
  Using cached murmurhash-1.0.5-cp36-cp36m-manylinux2014_x86_64.whl (20 kB)
Requirement already satisfied: jinja2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy-&gt;-r requirements.txt (line 2)) (2.11.3)
Collecting catalogue&lt;2.1.0,&gt;=2.0.6
  Using cached catalogue-2.0.6-py3-none-any.whl (17 kB)
Collecting typer&lt;0.5.0,&gt;=0.3.0
  Using cached typer-0.4.0-py3-none-any.whl (27 kB)
Collecting spacy-legacy&lt;3.1.0,&gt;=3.0.8
  Using cached spacy_legacy-3.0.8-py2.py3-none-any.whl (14 kB)
Collecting preshed&lt;3.1.0,&gt;=3.0.2
  Using cached preshed-3.0.5-cp36-cp36m-manylinux2014_x86_64.whl (126 kB)
Requirement already satisfied: setuptools in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy-&gt;-r requirements.txt (line 2)) (49.6.0.post20210108)
Requirement already satisfied: numpy&gt;=1.15.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy-&gt;-r requirements.txt (line 2)) (1.19.5)
Requirement already satisfied: typing-extensions&lt;4.0.0.0,&gt;=3.7.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy-&gt;-r requirements.txt (line 2)) (3.10.0.2)
Collecting blis&lt;0.8.0,&gt;=0.4.0
  Using cached blis-0.7.4-cp36-cp36m-manylinux2014_x86_64.whl (9.8 MB)
Collecting cymem&lt;2.1.0,&gt;=2.0.2
  Using cached cymem-2.0.5-cp36-cp36m-manylinux2014_x86_64.whl (35 kB)
Collecting pathy&gt;=0.3.5
  Using cached pathy-0.6.0-py3-none-any.whl (42 kB)
Collecting pydantic!=1.8,!=1.8.1,&lt;1.9.0,&gt;=1.7.4
  Using cached pydantic-1.8.2-cp36-cp36m-manylinux2014_x86_64.whl (10.2 MB)
Collecting wasabi&lt;1.1.0,&gt;=0.8.1
  Using cached wasabi-0.8.2-py3-none-any.whl (23 kB)
Collecting thinc&lt;8.1.0,&gt;=8.0.9
  Using cached thinc-8.0.10-cp36-cp36m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (625 kB)
Collecting srsly&lt;3.0.0,&gt;=2.4.1
  Using cached srsly-2.4.1-cp36-cp36m-manylinux2014_x86_64.whl (456 kB)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.38.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy-&gt;-r requirements.txt (line 2)) (4.62.2)
Requirement already satisfied: python-dateutil&gt;=2.7.3 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from pandas-&gt;-r requirements.txt (line 4)) (2.8.1)
Requirement already satisfied: pytz&gt;=2017.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from pandas-&gt;-r requirements.txt (line 4)) (2021.1)
Collecting textblob&lt;0.16.0,&gt;=0.15.3
  Using cached textblob-0.15.3-py2.py3-none-any.whl (636 kB)
Requirement already satisfied: zipp&gt;=0.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from catalogue&lt;2.1.0,&gt;=2.0.6-&gt;spacy-&gt;-r requirements.txt (line 2)) (3.4.0)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from packaging-&gt;fastai-&gt;-r requirements.txt (line 1)) (2.4.7)
Collecting smart-open&lt;6.0.0,&gt;=5.0.0
  Using cached smart_open-5.2.1-py3-none-any.whl (58 kB)
Requirement already satisfied: dataclasses&lt;1.0,&gt;=0.6 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from pathy&gt;=0.3.5-&gt;spacy-&gt;-r requirements.txt (line 2)) (0.8)
Requirement already satisfied: six&gt;=1.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from python-dateutil&gt;=2.7.3-&gt;pandas-&gt;-r requirements.txt (line 4)) (1.15.0)
Requirement already satisfied: charset-normalizer~=2.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests-&gt;fastai-&gt;-r requirements.txt (line 1)) (2.0.6)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests-&gt;fastai-&gt;-r requirements.txt (line 1)) (2021.5.30)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests-&gt;fastai-&gt;-r requirements.txt (line 1)) (3.1)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests-&gt;fastai-&gt;-r requirements.txt (line 1)) (1.26.6)
Requirement already satisfied: nltk&gt;=3.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from textblob&lt;0.16.0,&gt;=0.15.3-&gt;spacytextblob-&gt;-r requirements.txt (line 6)) (3.4.4)
Requirement already satisfied: contextvars&lt;3,&gt;=2.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from thinc&lt;8.1.0,&gt;=8.0.9-&gt;spacy-&gt;-r requirements.txt (line 2)) (2.4)
Requirement already satisfied: immutables&gt;=0.9 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from contextvars&lt;3,&gt;=2.4-&gt;thinc&lt;8.1.0,&gt;=8.0.9-&gt;spacy-&gt;-r requirements.txt (line 2)) (0.15)
Requirement already satisfied: click&lt;9.0.0,&gt;=7.1.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from typer&lt;0.5.0,&gt;=0.3.0-&gt;spacy-&gt;-r requirements.txt (line 2)) (7.1.2)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jinja2-&gt;spacy-&gt;-r requirements.txt (line 2)) (1.1.1)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from matplotlib-&gt;fastai-&gt;-r requirements.txt (line 1)) (1.3.1)
Requirement already satisfied: cycler&gt;=0.10 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from matplotlib-&gt;fastai-&gt;-r requirements.txt (line 1)) (0.10.0)
Requirement already satisfied: threadpoolctl&gt;=2.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from scikit-learn-&gt;fastai-&gt;-r requirements.txt (line 1)) (2.1.0)
Requirement already satisfied: joblib&gt;=0.11 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from scikit-learn-&gt;fastai-&gt;-r requirements.txt (line 1)) (1.0.1)
Installing collected packages: murmurhash, cymem, catalogue, wasabi, typer, srsly, smart-open, pydantic, preshed, blis, torch, thinc, spacy-legacy, pathy, fastprogress, torchvision, textblob, spacy, fastdownload, spacytextblob, pydash, fastai, biopython
Successfully installed biopython-1.79 blis-0.7.4 catalogue-2.0.6 cymem-2.0.5 fastai-2.5.2 fastdownload-0.0.5 fastprogress-1.0.0 murmurhash-1.0.5 pathy-0.6.0 preshed-3.0.5 pydantic-1.8.2 pydash-5.1.0 smart-open-5.2.1 spacy-3.1.3 spacy-legacy-3.0.8 spacytextblob-3.0.1 srsly-2.4.1 textblob-0.15.3 thinc-8.0.10 torch-1.9.1 torchvision-0.10.1 typer-0.4.0 wasabi-0.8.2
Collecting en-core-web-md==3.1.0
  Downloading https://github.com/explosion/spacy-models/releases/download/en_core_web_md-3.1.0/en_core_web_md-3.1.0-py3-none-any.whl (45.4 MB)
     |████████████████████████████████| 45.4 MB 120 kB/s  eta 0:00:01     |███████████████████████▌        | 33.3 MB 14.0 MB/s eta 0:00:01/s eta 0:00:01
Requirement already satisfied: spacy&lt;3.2.0,&gt;=3.1.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from en-core-web-md==3.1.0) (3.1.3)
Requirement already satisfied: preshed&lt;3.1.0,&gt;=3.0.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (3.0.5)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.13.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.26.0)
Requirement already satisfied: blis&lt;0.8.0,&gt;=0.4.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.7.4)
Requirement already satisfied: spacy-legacy&lt;3.1.0,&gt;=3.0.8 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (3.0.8)
Requirement already satisfied: srsly&lt;3.0.0,&gt;=2.4.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.4.1)
Requirement already satisfied: pathy&gt;=0.3.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.6.0)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.38.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (4.62.2)
Requirement already satisfied: typing-extensions&lt;4.0.0.0,&gt;=3.7.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (3.10.0.2)
Requirement already satisfied: typer&lt;0.5.0,&gt;=0.3.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.4.0)
Requirement already satisfied: jinja2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.11.3)
Requirement already satisfied: murmurhash&lt;1.1.0,&gt;=0.28.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (1.0.5)
Requirement already satisfied: numpy&gt;=1.15.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (1.19.5)
Requirement already satisfied: setuptools in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (49.6.0.post20210108)
Requirement already satisfied: packaging&gt;=20.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (20.9)
Requirement already satisfied: thinc&lt;8.1.0,&gt;=8.0.9 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (8.0.10)
Requirement already satisfied: catalogue&lt;2.1.0,&gt;=2.0.6 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.0.6)
Requirement already satisfied: cymem&lt;2.1.0,&gt;=2.0.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.0.5)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,&lt;1.9.0,&gt;=1.7.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (1.8.2)
Requirement already satisfied: wasabi&lt;1.1.0,&gt;=0.8.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.8.2)
Requirement already satisfied: zipp&gt;=0.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from catalogue&lt;2.1.0,&gt;=2.0.6-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (3.4.0)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from packaging&gt;=20.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.4.7)
Requirement already satisfied: dataclasses&lt;1.0,&gt;=0.6 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from pathy&gt;=0.3.5-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.8)
Requirement already satisfied: smart-open&lt;6.0.0,&gt;=5.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from pathy&gt;=0.3.5-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (5.2.1)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (1.26.6)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (3.1)
Requirement already satisfied: charset-normalizer~=2.0.0 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.0.6)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from requests&lt;3.0.0,&gt;=2.13.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2021.5.30)
Requirement already satisfied: contextvars&lt;3,&gt;=2.4 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from thinc&lt;8.1.0,&gt;=8.0.9-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (2.4)
Requirement already satisfied: immutables&gt;=0.9 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from contextvars&lt;3,&gt;=2.4-&gt;thinc&lt;8.1.0,&gt;=8.0.9-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (0.15)
Requirement already satisfied: click&lt;9.0.0,&gt;=7.1.1 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from typer&lt;0.5.0,&gt;=0.3.0-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (7.1.2)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /home/ec2-user/anaconda3/envs/python3/lib/python3.6/site-packages (from jinja2-&gt;spacy&lt;3.2.0,&gt;=3.1.0-&gt;en-core-web-md==3.1.0) (1.1.1)
Installing collected packages: en-core-web-md
Successfully installed en-core-web-md-3.1.0
<span class="ansi-green-fg">✔ Download and installation successful</span>
You can now load the package via spacy.load(&#39;en_core_web_md&#39;)
Converted 00_core.ipynb.
Converted 00_utils.ipynb.
Converted 01_colab_utils.ipynb.
Converted 02_scattertext.ipynb.
Converted 02_text_patterns.ipynb.
Converted 03_classifier.ipynb.
Converted 04_sentence_transformers.ipynb.
Converted 98_embedding_projector.ipynb.
Converted 99_pattern_CORE.ipynb.
Converted 99_process_CORE_sample.ipynb.
Converted 99_process_heffernan_ACL_dataset.ipynb.
Converted 99_summarization.ipynb.
Converted index.ipynb.
Converted integrate_spreadsheet.ipynb.
converting: /home/ec2-user/SageMaker/octoflow/99_process_heffernan_ACL_dataset.ipynb
converting: /home/ec2-user/SageMaker/octoflow/index.ipynb
converting: /home/ec2-user/SageMaker/octoflow/integrate_spreadsheet.ipynb
converting: /home/ec2-user/SageMaker/octoflow/99_process_CORE_sample.ipynb
converting: /home/ec2-user/SageMaker/octoflow/02_scattertext.ipynb
converting: /home/ec2-user/SageMaker/octoflow/00_core.ipynb
converting: /home/ec2-user/SageMaker/octoflow/99_summarization.ipynb
converting: /home/ec2-user/SageMaker/octoflow/02_text_patterns.ipynb
converting: /home/ec2-user/SageMaker/octoflow/01_colab_utils.ipynb
converting: /home/ec2-user/SageMaker/octoflow/98_embedding_projector.ipynb
converting: /home/ec2-user/SageMaker/octoflow/04_sentence_transformers.ipynb
converting: /home/ec2-user/SageMaker/octoflow/99_pattern_CORE.ipynb
converting: /home/ec2-user/SageMaker/octoflow/03_classifier.ipynb
Warning: Some of your Notebooks use the same title ([&#39;Title&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Finding (Problem Statement) Signal in Sentence Phrasing&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Pattern Sanity Check on CORE Abstracts&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Title&#39;, &#39;Integrate Labeled Dataset&#39;]).
converting /home/ec2-user/SageMaker/octoflow/index.ipynb to README.md
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#     &quot;&quot;&quot;checks paragraph for key sentences. Returns first matching hit&quot;&quot;&quot;</span>
<span class="c1">#     p_sents = paragraph.split(&quot;.&quot;)</span>
<span class="c1">#     combinations = itertools.product(p_sents, cue_phrases)</span>
<span class="c1">#     hit = &quot;&quot;</span>
<span class="c1">#     for c in combinations:</span>
<span class="c1">#         if c[1] in c[0]:</span>
<span class="c1">#        # if c[0].startswith(c[1]): #easier to work with later assuming beginning of sentence</span>
<span class="c1">#             hit = c[0]</span>
<span class="c1">#             break</span>
<span class="c1">#     return hit</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_into_sentences" class="doc_header"><code>split_into_sentences</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L21" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_into_sentences</code>(<strong><code>text</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_pubmed_records" class="doc_header"><code>get_pubmed_records</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L52" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_pubmed_records</code>(<strong><code>pmids</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_attribute_text" class="doc_header"><code>get_attribute_text</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L65" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_attribute_text</code>(<strong><code>AbstractText</code></strong>, <strong><code>NlmCategory</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_segment" class="doc_header"><code>get_segment</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_segment</code>(<strong><code>record</code></strong>, <strong><code>segment_label</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sentence_has_phrase" class="doc_header"><code>sentence_has_phrase</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L93" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sentence_has_phrase</code>(<strong><code>sentence</code></strong>, <strong><code>cue_phrases</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_sentence_in_abstract" class="doc_header"><code>find_sentence_in_abstract</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L99" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_sentence_in_abstract</code>(<strong><code>paragraph</code></strong>, <strong><code>bias</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>checks paragraph for key sentences. Returns first matching hit</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span> <span class="k">as</span> <span class="nn">req</span>

<span class="c1"># url = &quot;https://github.com/derekchuank/high-frequency-vocabulary/blob/master/30k.txt&quot;</span>
<span class="c1"># res = req.get(url)</span>
<span class="c1"># vocab30k = res.text.split(&quot;\t\n&quot;)</span>
<span class="c1"># vocab30k[:5]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_outof_vocab_words" class="doc_header"><code>replace_outof_vocab_words</code><a href="https://github.com/markusstrasser/octoflow/tree/master/octoflow/core.py#L129" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_outof_vocab_words</code>(<strong><code>text</code></strong>, <strong><code>vocab</code></strong>, <strong><code>nlp</code></strong>=<em><code>&lt;spacy.lang.en.English object at 0x7f7a2bae5e48&gt;</code></em>, <strong><code>extra_vocab</code></strong>=<em><code>['-PRON-', '-pron-', '.', ',', ';']</code></em>, <strong><code>special_tokens</code></strong>=<em><code>{'(': '-lrb-', ')': '-rrb-'}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*ing$&#39;</span><span class="p">,</span> <span class="s1">&#39;VBG&#39;</span><span class="p">),</span>               <span class="c1"># gerunds</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*ed$&#39;</span><span class="p">,</span> <span class="s1">&#39;VBD&#39;</span><span class="p">),</span>                <span class="c1"># simple past</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*es$&#39;</span><span class="p">,</span> <span class="s1">&#39;VBZ&#39;</span><span class="p">),</span>                <span class="c1"># 3rd singular present</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*ould$&#39;</span><span class="p">,</span> <span class="s1">&#39;MD&#39;</span><span class="p">),</span>               <span class="c1"># modals</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*</span><span class="se">\&#39;</span><span class="s1">s$&#39;</span><span class="p">,</span> <span class="s1">&#39;NN$&#39;</span><span class="p">),</span>               <span class="c1"># possessive nouns</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*s$&#39;</span><span class="p">,</span> <span class="s1">&#39;NNS&#39;</span><span class="p">),</span>                 <span class="c1"># plural nouns</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^-?[0-9]+(.[0-9]+)?$&#39;</span><span class="p">,</span> <span class="s1">&#39;CD&#39;</span><span class="p">),</span>  <span class="c1"># cardinal numbers</span>
    <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*&#39;</span><span class="p">,</span> <span class="s1">&#39;NN&#39;</span><span class="p">)</span>                     <span class="c1"># nouns (default)</span>
<span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pubmed-Abstract/Fulltext-Fetching-and-Cleaning">Pubmed Abstract/Fulltext Fetching and Cleaning<a class="anchor-link" href="#Pubmed-Abstract/Fulltext-Fetching-and-Cleaning"> </a></h2><p>Pubmed does not give fulltext/abstract text in a good format. It gives a CSV with the metadata of searched results. That means you have to use the Entrez fetch and then merge the abstracts and text information with the metadata to have something workable</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;clinical_study_abst.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;clin_study_meta.csv&quot;</span><span class="p">)</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">get_pubmed_records</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">pmid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pmid</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;PMID&quot;</span><span class="p">]])</span>
<span class="nb">len</span><span class="p">([</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span><span class="p">[</span><span class="s2">&quot;PubmedArticle&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">r</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>

<span class="n">articles</span> <span class="o">=</span> <span class="n">records</span><span class="p">[</span><span class="s2">&quot;PubmedArticle&quot;</span><span class="p">]</span>

<span class="n">g</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;PMID&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="s2">&quot;MedlineCitation.PMID&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">],</span>
    
    <span class="s2">&quot;BACKGROUND&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">get_segment</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;BACKGROUND&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">],</span>
    <span class="s2">&quot;OBJECTIVE&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">get_segment</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;OBJECTIVE&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">],</span>
    <span class="s2">&quot;METHODS&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">get_segment</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;METHODS&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">],</span>
    <span class="s2">&quot;RESULTS&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">get_segment</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;RESULTS&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">],</span>
    <span class="s2">&quot;CONCLUSIONS&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">get_segment</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;CONCLUSIONS&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">]</span>
     <span class="p">}</span>

<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">df2</span><span class="p">[</span><span class="s2">&quot;PMID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s2">&quot;PMID&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">dfx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;PMID&quot;</span><span class="p">)</span>
<span class="n">dfx</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;enriched_pm_10k.csv&quot;</span><span class="p">)</span>

<span class="n">dfx</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">df2</span><span class="p">),</span> <span class="n">df</span><span class="p">[:</span><span class="mi">6768</span><span class="p">][</span><span class="s2">&quot;PMID&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">df2</span><span class="p">[:</span><span class="mi">6768</span><span class="p">][</span><span class="s2">&quot;PMID&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Text-Features-with-spacy-extensions">Text Features with spacy extensions<a class="anchor-link" href="#Text-Features-with-spacy-extensions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">from</span> <span class="nn">spacytextblob.spacytextblob</span> <span class="kn">import</span> <span class="n">SpacyTextBlob</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;en_core_web_sm&#39;</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s1">&#39;spacytextblob&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;I had a really horrible day. It was the worst day ever! But every now and then I have a really good day that makes me happy.&#39;</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span>      <span class="c1"># Polarity: -0.125</span>
<span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">subjectivity</span>  <span class="c1"># Sujectivity: 0.9</span>
<span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">assessments</span>   <span class="c1"># Assessments: [([&#39;really&#39;, &#39;horrible&#39;], -1.0, 1.0, None), ([&#39;worst&#39;, &#39;!&#39;], -1.0, 1.0, None), ([&#39;really&#39;, &#39;good&#39;], 0.7, 0.6000000000000001, None), ([&#39;happy&#39;], 0.8, 1.0, None)]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

